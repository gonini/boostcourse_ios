# MVC (Model-View-Controller) 디자인 패턴

애플리케이션의 객체를 모델, 뷰, 컨트롤러 역할 중 하나의 역할로 할당. 이 패턴은 애플리케이션 내에서 객체가 수행하는 역할 뿐 아니라 객체가 서로 통신하는 방식을 정의한다. 세 유형의 객체는 각 추상적인 경계에 의해 다른 객체와 구분되고, 그 경계를 넘어 다른 유형의 객체와 통신한다. 애플리케이션 내의 특정 MVC 유형을 한데 모아 레이어라고 한다.



### 모델 객체 (Model Objects)

애플리캐이션과 관련된 데이터를 캡슐화하고, 해당 데이터를 조작하고 처리하는 로직과 계산을 정의.

하나의 모델 객체는 다른 모델 객체와 일대일 또는 일대다 대응 관계를 맺을 수 있다. 모델 객체는 데이터를 사용자에게 제공하거나 사용자가 이를 편집할 수 있는 뷰 객체에 명시적으로 연결되어서는 안된다. 즉, 사용자 인터페이스나 표시 문제와 관련이 있어서는 안된다.



**잘 설계된 모델 클래스**

모델 객체(=모델 클래스)를 생성하는 클래스는 Core Data technology를 사용하고 있는 경우 NSManagerdObject 서브 클래스를 많이 사용한다. Objective-C 언어를 사용하는 경우 모델 객체는 일반적으로 NSObject의 서브 클래스지만 스위프트 언어를 사용하는 경우에는 특별한 경우가 아니라면 NSObject를 상속받지 않는다. 또, 값 타입의 모델이 필요한 경우 클래스 대신 구조체를 활용하기도 한다.



**모델 서브클래스를 구현할 때, 클래스 디자인에서 고려해야할 것**

- **인스턴스 변수**

  애플리케이션 내에 캡슐화된 데이터를 유지하기 위해선 인스턴스 변수를 선언해야한다. 인스턴스 변수는 객체, 스칼라 값, 또는 NSRange와 같은 구조체일 수 있다. 비객체형 (nonobject types) 대신 객체형을 사용하는 데에는 장단점이 있기 때문에 객체 상호 관계(object mutuality)를 고려해야한다.

- **접근자 메소드(Accessor methods)와 프로퍼티**

  접근자 메소드는 일반적으로 인스턴스 변수값을 획득 및 설정하며, 흔히 획득자 및 설정자 메소드(getter and setter methods)라고 알려져있다. 스위프트에서 인스턴스 변수를 private 또는 fileprivate 등으로 접근을 제한한 경우에 인스턴스 외부에서 접근하려면 접근자 메소드가 필요하다.

- **키-값(Key-value) 코딩**

  키-값 코딩은 클라이언트가 프로퍼티 이름을 키로 사용해 객체의 프로퍼티에 접근할 수 있게 하는 메커니즘이다. Core Data에서 사용하고 있으며 Cocoa의 다른 곳에서도 사용하고 있다. 접근자 메소드의 이름 지정이 메커니즘의 요소가 된다.

- **초기화 및 할당 해제 (Initialization and deallocation)**

  대부분 모델 클래스는 인스턴스 변수를 적절한 초기값으로 설정하는 이니셜라이저 메소드를 구현한다. 여기서 초기화는 이니셜라이저 메소드의 표준 형식을 따라야 하고, deinit 메소드에서 객체 값을 가지는 모든 인스턴스 변수를 해제해야 한다.

- **객체 인코딩**

  모델 클래스의 객체를 보관하려는 경우, 해당 객체의 인스턴스 변수를 인코딩 및 디코딩할 수 있어야 한다.

- **객체 복제**

  클라이언트가 모델 객체를 복제할 것으로 예상하는 경우, 클래스의 객체 복제를 구현해야 한다.



### 뷰 객체 (View Objects)

애플리케이션 내에서 사용자가 볼 수 있는 객체로 뷰 객체의 주 목적은 애플리케이션의 모델 객체의 데이터를 보여주고 해당 데이터를 편집할 수 있도록 하는 것이다. 



### 컨트롤러 객체 (Controller Objects)

하나 이상의 애플리케이션 뷰 객체와 하나 이상의 모델 객체 사이의 코디네이터 또는 중개자 역할을 한다.

MVC 디자인 패턴에서 컨트롤러 객체는 사용자가 버튼을 탭하거나 텍스트 필드에서 텍스트를 입력하는 것처럼 뷰 객체에서 이루어진 사용자 동작 및 의도를 해석하며, 신규 혹은 변경된 데이터를 모델 객체에 전달한다. 컨트롤러 객체는 애플리케이션의 설정 및 조정 작업을 수행할 수도 있고, 다른 객체들의 life cycle을 관리하기도 한다. iOS 환경의 Cocoa Touch 프레임워크는 코디네이팅 컨트롤러, 뷰 컨트롤러의 두 가지 유형을 제공한다.



#### 코디네이팅 컨트롤러 (Cordinating Controller)

애플리케이션 전체 또는 일부 기능을 감독하고 관리한다. 애플리케이션 별로 다른 로직이 각 애플리케이션에 주입(injected)되는 곳이라고 할 수 있으며 기능은 아래와 같다.

- 델리게이션(delegation) 메시지에 응답하고 알림(notifications)을 관리
- 사용자가 버튼과 같은 컨트롤을 클릭함에 따라 전송되는 동작 메시지에 응답
- 객체 간의 연결을 확립하거나 기타 설정 작업을 수행 (예 : 애플리케이션을 시작하는 경우)
- 소유한 객체의 생명 주기 관리

iOS 애플리케이션에서는 뷰 컨트롤러가 코디네이팅 컨트롤러의 역할을 겸하는 경우가 많다.



#### 뷰 컨트롤러 (View Controller)

UIKit에서 뷰컨트롤러는 콘텐츠를 화면에 표시하는 뷰를 관리하며, 해당 뷰에 대한 참조(reference)를 유지하고, 뷰 컨트롤러는 이 뷰의 프레젠테이션(presentation) 및 후속 뷰로의 전환(transition)을 관리한다. 이와 관련된 모든 프레젠테이션 동작은 뷰 컨트롤러 객체에 의해 관리되고 구현된다.